(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{135:function(e,t){},138:function(e,t){},151:function(e,t){},162:function(e,t){},163:function(e,t){},181:function(e,t){},183:function(e,t){},194:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var r=n(68),a=n.n(r),s=n(204),c=n(211),i=n(209),o=n(9),u=n(17),l=n(10),d=n(4),p=n(1),b=n.n(p),m=n(90),f=n(203),j=n(117),x=n(2);function h(e,t){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.account.postState.fetch(new o.PublicKey(t));case 3:if(r=e.sent,(a=r.user.toString())!==o.SystemProgram.programId.toString()){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",{id:t,title:r.title,content:r.content,userId:a,prePostId:r.prePostKey.toString()});case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var g=n(207);function y(e){var t,n=new g.a((function(n){function r(){return(r=Object(d.a)(b.a.mark((function t(){var r,a,s,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.program,a=e.fromPostId,s=a;case 2:if(!s){t.next=12;break}return t.next=5,h(s,r);case 5:if(c=t.sent){t.next=8;break}return t.abrupt("break",12);case 8:n.next(c),s=c.prePostId,t.next=2;break;case 12:n.complete();case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t=n,function(){r.apply(this,arguments)}()}));return[n,function(){var e;return null===(e=t)||void 0===e?void 0:e.unsubscribe()}]}function O(e,t){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(b.a.mark((function e(t,n){var r,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=E(n),e.prev=1,e.next=4,t.account.userState.fetch(r.publicKey);case 4:return a=e.sent,s={id:r.publicKey.toString(),name:a.name,avatar:a.avatar},e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function k(e,t,n){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(b.a.mark((function e(t,n,r){var a,s,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.account.blogState.fetch(n);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),s=o.Keypair.generate(),c=o.Keypair.generate(),e.next=13,t.rpc.initBlog({accounts:{authority:r,systemProgram:o.SystemProgram.programId,blogAccount:s.publicKey,genesisPostAccount:c.publicKey},signers:[s,c]});case 13:return e.next=15,t.account.blogState.fetch(s.publicKey);case 15:return i=e.sent,console.log("Blog pubkey: ",s.publicKey.toString()),e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var N=n(115),S=n.n(N),K=function(e){return"https://gravatar.com/avatar/".concat(S()(e),"?s=400&d=robohash&r=x")},C=n(116),A=n.n(C),M=n(91),I=n(5),L=new o.PublicKey(M.metadata.address),B=new o.PublicKey("Gx7dKodSkhsbEvrXtVVECdC6a4sPb22iB3pCSmcVqBBp"),E=function(e){return o.Keypair.fromSeed((new TextEncoder).encode("".concat(L.toString().slice(0,15),"__").concat(e.toString().slice(0,15))))};function T(e){return new m.a(M,L,e)}var z=Object(x.createContext)({user:void 0,posts:[],createPost:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updatePost:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deletePost:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteLatestPost:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchUser:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),F=function(){var e=Object(x.useContext)(z);if(!e)throw new Error("Parent must be wrapped inside PostsProvider");return e},U=function(e){var t=e.children,n=Object(x.useState)(),r=Object(l.a)(n,2),a=r[0],s=r[1],c=Object(x.useState)([]),i=Object(l.a)(c,2),p=i[0],v=i[1],g=Object(x.useState)(),w=Object(l.a)(g,2),P=w[0],N=w[1],S=Object(f.a)(),C=Object(j.b)().connection,M=Object(x.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,a,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=13;break}return n=t.name,r=t.avatar,a=T(P),s=E(P.wallet.publicKey),e.prev=4,e.next=7,a.rpc.signupUser(n,r,{accounts:{authority:P.wallet.publicKey,userAccount:s.publicKey,systemProgram:o.SystemProgram.programId},signers:[s]});case 7:return c=e.sent,e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(4);case 13:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),[P]),L=Object(x.useCallback)(Object(d.a)(b.a.mark((function e(){var t,n,r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=17;break}return t=T(P),e.next=4,O(t,P.wallet.publicKey);case 4:if(n=e.sent){e.next=16;break}return r=A()(" "),a=K(r),e.next=10,M({name:r,avatar:a});case 10:return e.next=12,O(t,P.wallet.publicKey);case 12:c=e.sent,s(c),e.next=17;break;case 16:s(n);case 17:case"end":return e.stop()}}),e)}))),[P,M]),F=Object(x.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=K(t),!P){e.next=15;break}return r=T(P),a=E(P.wallet.publicKey),e.prev=4,e.next=7,r.rpc.updateUser(t,n,{accounts:{authority:P.wallet.publicKey,userAccount:a.publicKey,systemProgram:o.SystemProgram.programId}});case 7:return s=e.sent,e.next=10,L();case 10:return e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(4);case 15:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),[L,P]),U=Object(x.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,s,c,i,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P||!a){e.next=8;break}return n=t.title,r=t.content,s=void 0===r?"":r,c=T(P),i=o.Keypair.generate(),e.next=6,c.rpc.createPost(n,s,{accounts:{blogAccount:B,authority:P.wallet.publicKey,userAccount:new o.PublicKey(a.id),postAccount:i.publicKey,systemProgram:o.SystemProgram.programId},signers:[i]});case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P,a]),H=Object(x.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a,s,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=11;break}return r=n.title,a=n.content,s=T(P),e.next=5,s.rpc.updatePost(r,a,{accounts:{authority:P.wallet.publicKey,postAccount:new o.PublicKey(t.id)}});case 5:return c=e.sent,e.next=8,h(t.id,s);case 8:return(i=e.sent)&&v((function(e){return e.map((function(e){return e.id===t.id?i:e}))})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[P]),V=Object(x.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=6;break}return r=T(P),e.next=4,r.rpc.deletePost({accounts:{authority:P.wallet.publicKey,postAccount:new o.PublicKey(t),nextPostAccount:new o.PublicKey(n)}});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[P]),W=Object(x.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=6;break}return n=T(P),e.next=4,n.rpc.deleteLatestPost({accounts:{authority:P.wallet.publicKey,postAccount:new o.PublicKey(t),blogAccount:B}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P]);return Object(x.useEffect)((function(){if(S){var e=new m.b(C,S,{});N(e)}}),[C,S]),Object(x.useEffect)((function(){var e;function t(){return t=Object(d.a)(b.a.mark((function t(){var n,r,a,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!P){t.next=7;break}return n=T(P),t.next=4,k(n,B,P.wallet.publicKey);case 4:r=t.sent,a=y({program:n,fromPostId:r.currentPostKey.toString()}),s=Object(l.a)(a,1),s[0].subscribe({next:function(e){v((function(t){return[].concat(Object(u.a)(t),[e])}))},complete:function(){e=n.addEventListener("PostEvent",function(){var e=Object(d.a)(b.a.mark((function e(t){var r,a,s,c,i,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===t||void 0===t||null===(r=t.postId)||void 0===r?void 0:r.toString(),c=null===t||void 0===t||null===(a=t.nextPostId)||void 0===a?void 0:a.toString(),!s){e.next=27;break}e.t0=t.label,e.next="CREATE"===e.t0?6:"UPDATE"===e.t0?11:"DELETE"===e.t0?16:26;break;case 6:return e.next=8,h(s,n);case 8:return(i=e.sent)&&v((function(e){return[i].concat(Object(u.a)(e))})),e.abrupt("break",27);case 11:return e.next=13,h(s,n);case 13:return(o=e.sent)&&v((function(e){return e.map((function(e){return e.id===s?o:e}))})),e.abrupt("break",27);case 16:if(!c){e.next=22;break}return e.next=19,h(c,n);case 19:e.t1=e.sent,e.next=23;break;case 22:e.t1=null;case 23:return l=e.t1,v((function(e){return e.filter((function(e){return e.id!==s})).map((function(e){return e.id===c&&l?l:e}))})),e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}});case 7:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){P&&e&&T(P).removeEventListener(e).catch((function(e){console.log("error: ",e.message)}))}}),[P]),Object(I.jsx)(z.Provider,{value:{user:a,posts:p,createPost:U,updatePost:H,deletePost:V,fetchUser:L,updateUser:F,deleteLatestPost:W},children:t})},H=n(122),V=n(21),W=n(73),D=n(121),J=function(e){var t=e.children,n=e.loading,r=void 0===n||n,a=e.className,s=void 0===a?"":a;return Object(I.jsxs)("button",{disabled:r,className:"rounded-lg flex justify-center items-center py-2 px-4 border border-transparent text-sm font-medium text-white bg-gradient-to-r from-indigo-400  to-green-500 focus:outline-none shadow-md \n\t\t\t".concat(s," ").concat(r?"opacity-50 cursor-not-allowed":"transform hover:-translate-y-px focus:shadow-sm focus:-translate-y-0","\n\t\t\t"),children:[!r,!r&&Object(I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),r&&Object(I.jsx)("svg",{className:"animate-spin h-5 w-5 text-white mr-1",viewBox:"0 0 24 24",children:Object(I.jsx)("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"})}),t]})},R=n(11),G=n(212),Z=n(210),_=n(205),q=n(206),X=function(e){var t=e.name,n=Object(x.useRef)(),r=Object(x.useRef)(),a=Object(q.a)(n.current,r.current),s=a.styles,c=a.attributes,i=F().updateUser,o=Object(x.useState)(!1),u=Object(l.a)(o,2),p=u[0],m=u[1],f=Object(x.useState)(t),j=Object(l.a)(f,2),h=j[0],v=j[1],g=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,i(h);case 3:m(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(I.jsx)(G.a,{className:"relative",children:function(e){var t=e.open;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(G.a.Button,{ref:n,children:Object(I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})})}),Object(I.jsx)(Z.a,{show:t,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-8",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:Object(I.jsx)(G.a.Panel,Object(R.a)(Object(R.a)({ref:r,style:Object(R.a)(Object(R.a)({},Object(_.a)(s.popper,["transform","left","top"])),{},{right:0})},c.popper),{},{className:"absolute bottom-8 z-20 transform transition-all",children:Object(I.jsxs)("div",{className:"glass rounded-xl shadow-xl py-4 px-6 flex flex-col",children:[Object(I.jsx)("input",{value:h,onChange:function(e){return v(e.target.value)},type:"text",placeholder:"Your lovely name",className:"bg-white rounded-3xl h-10 px-4"}),Object(I.jsx)(J,{loading:p,onClick:g,className:"w-full mt-3",children:"Save"})]})}))})]})}})},Y=function(){return Object(I.jsxs)("div",{className:"card glass relative overflow-hidden flex shadow rounded-lg h-36 bg-white p-4 mt-4",children:[Object(I.jsx)("div",{className:"rounded-lg h-full w-32 bg-white"}),Object(I.jsxs)("div",{className:"flex-1 ml-3",children:[Object(I.jsx)("div",{className:"w-3/4 bg-white rounded-xl h-3 mt-1"}),Object(I.jsx)("div",{className:"w-2/4 bg-white rounded-xl h-3 mt-3"})]})]})},Q=n(208),$=function(e){var t=F().user,n=e.onSubmit,r=e.postTitle,a=e.postContent,s=e.setPostContent,c=e.setPostTitle,i=e.formHeader,o=e.buttonText,u=void 0===o?"Post":o,p=Object(x.useState)(!1),m=Object(l.a)(p,2),f=m[0],j=m[1];return Object(I.jsxs)("div",{className:"glass rounded-lg py-4 px-6 bg-white flex flex-col shadow",children:[i,Object(I.jsx)("input",{value:r,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Post title",className:"bg-white rounded-3xl h-10 px-4"}),Object(I.jsx)("textarea",{value:a,onChange:function(e){return s(e.target.value)},name:"content",id:"content-area",rows:3,placeholder:"Describe your post...",className:"bg-white rounded-xl px-4 py-2 mt-3"}),Object(I.jsx)(J,{className:"mt-3",disabled:!t,loading:f,onClick:Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,n();case 3:j(!1);case 4:case"end":return e.stop()}}),e)}))),children:u})]})},ee=function(e){var t=e.open,n=e.setOpen,r=e.post,a=r.title,s=r.content,c=Object(x.useState)(a),i=Object(l.a)(c,2),o=i[0],u=i[1],p=Object(x.useState)(s),m=Object(l.a)(p,2),f=m[0],j=m[1],h=F().updatePost;return Object(I.jsx)(Z.a.Root,{show:t,as:x.Fragment,children:Object(I.jsx)(Q.a,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",onClose:n,children:Object(I.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(I.jsx)(Z.a.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(I.jsx)(Q.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(I.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(I.jsx)(Z.a.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(I.jsx)("div",{className:"inline-block align-bottom bg-transparent rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:Object(I.jsx)($,{postTitle:o,postContent:f,setPostTitle:u,setPostContent:j,onSubmit:Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(r,{title:o,content:f});case 2:n(!1);case 3:case"end":return e.stop()}}),e)}))),buttonText:"Update",formHeader:Object(I.jsx)("div",{className:"flex justify-end mb-3",children:Object(I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 cursor-pointer text-gray-600  transition duration-100 ease-in-out transform hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:function(){return n(!1)},children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})})})]})})})},te=function(e){var t=e.toString();return t.length>20?"".concat(t.substring(0,4),"...").concat(t.substring(t.length-4,t.length)):t},ne=function(e){var t=e.id,n=e.title,r=e.content,a=e.user,s=e.date,c=e.nextPostId,i=e.prePostId,u=F(),p=u.user,m=u.deletePost,f=u.deleteLatestPost,j=Object(x.useState)(!1),h=Object(l.a)(j,2),v=h[0],g=h[1],y=Object(x.useState)(!1),O=Object(l.a)(y,2),w=O[0],k=O[1];return Object(I.jsxs)("div",{className:"glass rounded-lg py-4 px-6 bg-white shadow flex flex-col mt-4",children:[Object(I.jsx)("h3",{className:"font-bold text-lg text-gray-600",children:n}),Object(I.jsx)("p",{className:"my-2",children:r}),Object(I.jsxs)("div",{className:"flex justify-between items-end",children:[Object(I.jsxs)("div",{className:"flex items-center mt-2",children:[Object(I.jsx)("img",{src:"https://gravatar.com/avatar/0c3178b383820ae4f3f5b230717c4082?s=400&d=robohash&r=x",alt:"avatar",className:"w-10 h-10 rounded-full bg-gray-200 shadow ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),Object(I.jsxs)("div",{className:"mx-3",children:[Object(I.jsxs)("h3",{className:"font-bold text-gray-600 capitalize",children:["@",te(new o.PublicKey(a))]}),Object(I.jsx)("p",{className:"text-xs",children:s})]})]}),a===(null===p||void 0===p?void 0:p.id)&&Object(I.jsxs)("div",{className:"flex items-center",children:[Object(I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-green-500 transition duration-100 ease-in-out transform hover:scale-110 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:function(){return k(!0)},children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Object(I.jsx)(ee,{post:{title:n,content:r,id:t,userId:a,prePostId:i},open:w,setOpen:function(e){return k(e)}}),Object(I.jsx)("button",{disabled:v,className:v?"cursor-not-allowed":"cursor-pointer",onClick:Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(!0),!c){e.next=6;break}return e.next=4,m(t,c);case 4:e.next=8;break;case 6:return e.next=8,f(t);case 8:g(!1);case 9:case"end":return e.stop()}}),e)}))),children:v?Object(I.jsx)("svg",{className:"animate-spin h-5 w-5 text-red-500",viewBox:"0 0 24 24",children:Object(I.jsx)("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"})}):Object(I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 transition duration-100 ease-in-out transform hover:scale-110 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},re=function(){return Object(I.jsxs)("div",{className:"card glass relative overflow-hidden flex flex-col shadow rounded-lg bg-white p-4 mt-4",children:[Object(I.jsx)("div",{className:"rounded-lg h-32 bg-white"}),Object(I.jsxs)("div",{className:"flex-1 mt-4",children:[Object(I.jsx)("div",{className:"w-3/4 bg-white rounded-xl h-3 mt-1"}),Object(I.jsx)("div",{className:"w-2/4 bg-white rounded-xl h-3 mt-3"})]})]})},ae=function(){var e=Object(x.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(W.b)(),s=a.connected,c=a.select,i=a.publicKey,o=F(),u=o.user,p=o.posts,m=o.fetchUser,f=o.createPost,j=Object(x.useState)(""),h=Object(l.a)(j,2),v=h[0],g=h[1],y=Object(x.useState)(""),O=Object(l.a)(y,2),w=O[0],k=O[1],P=Object(x.useState)(),N=Object(l.a)(P,2),S=(N[0],N[1],function(){r(!0),c(D.a.Phantom)}),K=Object(x.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({title:t,content:n});case 3:g(""),k(""),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[f]);return Object(x.useEffect)((function(){i&&m()}),[m,i]),Object(x.useEffect)((function(){u&&r(!1)}),[u]),Object(I.jsxs)("div",{className:"dashboard background-color overflow-auto h-screen",children:[Object(I.jsx)("header",{className:"fixed z-10 w-full h-14 glass shadow-md",children:Object(I.jsxs)("div",{className:"flex justify-between items-center h-full container",children:[Object(I.jsxs)("h2",{className:"text-2xl font-bold",children:["\ud83d\udc7b"," ",Object(I.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-indigo-300  to-green-600",children:"BloG"})]}),s?Object(I.jsxs)("div",{className:"flex items-center",children:[Object(I.jsx)("img",{src:null===u||void 0===u?void 0:u.avatar,alt:"avatar",className:"w-8 h-8 rounded-full bg-gray-200 shadow ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),Object(I.jsx)("p",{className:"text-gray-600 font-bold text-sm ml-2 capitalize",children:null===u||void 0===u?void 0:u.name})]}):Object(I.jsx)(J,{loading:n,className:"w-28",onClick:S,leftIcon:Object(I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),children:"Connect"})]})}),Object(I.jsxs)("main",{className:"dashboard-main pb-4 container flex relative",children:[Object(I.jsx)("aside",{className:"flex-3 pt-6",children:Object(I.jsxs)("div",{className:"dashboard-aside px-8",children:[Object(I.jsx)("h2",{className:"font-bold text-gray-500",children:"You might find these posts interesting"}),Object(I.jsx)(Y,{}),Object(I.jsx)(Y,{}),Object(I.jsx)("hr",{className:"h-1 w-full bg-gray-100 rounded-xl mt-4"}),Object(I.jsx)("div",{className:"flex justify-between items-end mt-auto",children:Object(I.jsx)("div",{className:"flex w-full justify-between items-end",children:s?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"flex",children:[Object(I.jsx)("img",{src:null===u||void 0===u?void 0:u.avatar,alt:"avatar",className:"w-12 h-12 rounded-full shadow g-gray-200 ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),Object(I.jsxs)("div",{className:"flex flex-col items-start",children:[Object(I.jsx)("p",{className:"text-gray-700 font-bold text-lg ml-3 capitalize",children:null===u||void 0===u?void 0:u.name}),Object(I.jsxs)("p",{className:"text-gray-700 text-sm ml-3",children:["@",te(i)]})]})]}),!!u&&Object(I.jsx)(X,{name:u.name})]}):Object(I.jsx)(J,{loading:n,className:"w-full",onClick:S,children:"Connect to Wallet"})})})]})}),Object(I.jsx)("aside",{className:"flex-5 pt-6",children:Object(I.jsxs)("div",{className:"px-8",children:[Object(I.jsx)($,{postTitle:v,postContent:w,setPostTitle:g,setPostContent:k,onSubmit:function(){return K(v,w)}}),p.map((function(e,t){var n,r=e.title,a=e.content,s=e.userId,c=e.id,i=e.prePostId;return Object(I.jsx)(ne,{id:c,title:r,content:a,user:s,prePostId:i,nextPostId:null===(n=p[t-1])||void 0===n?void 0:n.id,date:"Dec 2, 2021"},c)}))]})}),Object(I.jsx)("aside",{className:"flex-3 pt-6",children:Object(I.jsxs)("div",{className:"px-8 dashboard-aside",children:[Object(I.jsx)("h2",{className:"font-bold text-gray-500",children:"Sponsored"}),Object(I.jsx)(re,{}),Object(I.jsx)(re,{}),Object(I.jsx)("div",{className:"flex justify-end mt-auto",children:Object(I.jsx)("p",{className:"text-sm",children:"\xa9 2021 BloG, Inc."})})]})})]})]})},se=function(){return Object(I.jsx)(H.a,{children:Object(I.jsxs)(V.c,{children:[Object(I.jsx)(V.a,{path:"/dashboard",children:Object(I.jsx)(ae,{})}),Object(I.jsx)(V.a,{path:"/",children:Object(I.jsx)(ae,{})})]})})},ce=[Object(i.a)()],ie=Object(o.clusterApiUrl)("devnet"),oe=function(){return Object(I.jsx)(s.a,{endpoint:ie,children:Object(I.jsx)(c.a,{wallets:ce,autoConnect:!0,children:Object(I.jsx)(U,{children:Object(I.jsx)(se,{})})})})};n(194);a.a.render(Object(I.jsx)(oe,{}),document.getElementById("root"))},91:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"blog_sol","instructions":[{"name":"initBlog","accounts":[{"name":"blogAccount","isMut":true,"isSigner":true},{"name":"genesisPostAccount","isMut":true,"isSigner":true},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"signupUser","accounts":[{"name":"userAccount","isMut":true,"isSigner":true},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"name","type":"string"},{"name":"avatar","type":"string"}]},{"name":"updateUser","accounts":[{"name":"userAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"name","type":"string"},{"name":"avatar","type":"string"}]},{"name":"createPost","accounts":[{"name":"postAccount","isMut":true,"isSigner":true},{"name":"userAccount","isMut":true,"isSigner":false},{"name":"blogAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"title","type":"string"},{"name":"content","type":"string"}]},{"name":"updatePost","accounts":[{"name":"postAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"title","type":"string"},{"name":"content","type":"string"}]},{"name":"deletePost","accounts":[{"name":"postAccount","isMut":true,"isSigner":false},{"name":"nextPostAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]},{"name":"deleteLatestPost","accounts":[{"name":"postAccount","isMut":true,"isSigner":false},{"name":"blogAccount","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]}],"accounts":[{"name":"BlogState","type":{"kind":"struct","fields":[{"name":"currentPostKey","type":"publicKey"},{"name":"authority","type":"publicKey"}]}},{"name":"UserState","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"avatar","type":"string"},{"name":"authority","type":"publicKey"}]}},{"name":"PostState","type":{"kind":"struct","fields":[{"name":"title","type":"string"},{"name":"content","type":"string"},{"name":"user","type":"publicKey"},{"name":"prePostKey","type":"publicKey"},{"name":"authority","type":"publicKey"}]}}],"events":[{"name":"PostEvent","fields":[{"name":"label","type":"string","index":false},{"name":"postId","type":"publicKey","index":false},{"name":"nextPostId","type":{"option":"publicKey"},"index":false}]}],"metadata":{"address":"JD5zKV5JvZHXAyF59y5C9kBR7epqGdzFHBvTpPFpwvpy"}}')}},[[195,1,2]]]);
//# sourceMappingURL=main.9c45b893.chunk.js.map